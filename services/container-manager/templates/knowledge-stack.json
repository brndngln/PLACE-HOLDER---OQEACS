{
  "name": "knowledge-stack",
  "description": "Systems 20,42-44,67: Qdrant, Knowledge Ingestion, RAG Pipeline, Embedding Service, Document Processing",
  "categories": ["knowledge", "rag", "embeddings"],
  "compose": "version: '3.8'\n\nservices:\n  # System 42 — Embedding Service\n  omni-embedding:\n    image: ghcr.io/huggingface/text-embeddings-inference:cpu-latest\n    container_name: omni-embedding\n    restart: unless-stopped\n    command: --model-id sentence-transformers/all-MiniLM-L6-v2 --port 8080\n    volumes:\n      - embedding-models:/data\n    ports:\n      - '8086:8080'\n    labels:\n      omni_quantum_component: embedding\n      omni_quantum_tier: high\n      omni_quantum_system: '42'\n      omni_quantum_stack: knowledge\n    healthcheck:\n      test: ['CMD', 'curl', '-f', 'http://localhost:8080/health']\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - omni-quantum-network\n\n  # System 43 — Knowledge Ingestion\n  omni-knowledge-ingest:\n    image: omni-quantum/knowledge-ingest:latest\n    container_name: omni-knowledge-ingest\n    restart: unless-stopped\n    environment:\n      QDRANT_URL: http://omni-qdrant:6333\n      EMBEDDING_API_URL: http://omni-embedding:8080/embed\n      POSTGRES_DSN: postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@omni-postgres:5432/knowledge\n      REDIS_URL: redis://:${REDIS_PASSWORD}@omni-redis:6379/4\n      LANGFUSE_PUBLIC_KEY: ${LANGFUSE_KNOWLEDGE_PUBLIC_KEY}\n      LANGFUSE_SECRET_KEY: ${LANGFUSE_KNOWLEDGE_SECRET_KEY}\n      LANGFUSE_HOST: http://omni-langfuse:3000\n    volumes:\n      - knowledge-data:/data\n      - knowledge-queue:/queue\n    ports:\n      - '8087:8000'\n    labels:\n      omni_quantum_component: knowledge-ingest\n      omni_quantum_tier: high\n      omni_quantum_system: '43'\n      omni_quantum_stack: knowledge\n    healthcheck:\n      test: ['CMD', 'curl', '-f', 'http://localhost:8000/health']\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - omni-quantum-network\n\n  # System 44 — RAG Pipeline\n  omni-rag-pipeline:\n    image: omni-quantum/rag-pipeline:latest\n    container_name: omni-rag-pipeline\n    restart: unless-stopped\n    environment:\n      QDRANT_URL: http://omni-qdrant:6333\n      EMBEDDING_API_URL: http://omni-embedding:8080/embed\n      LLM_API_BASE: http://omni-litellm:4000\n      LLM_API_KEY: ${LITELLM_MASTER_KEY}\n      LANGFUSE_PUBLIC_KEY: ${LANGFUSE_KNOWLEDGE_PUBLIC_KEY}\n      LANGFUSE_SECRET_KEY: ${LANGFUSE_KNOWLEDGE_SECRET_KEY}\n      LANGFUSE_HOST: http://omni-langfuse:3000\n      REDIS_URL: redis://:${REDIS_PASSWORD}@omni-redis:6379/5\n    ports:\n      - '8088:8000'\n    labels:\n      omni_quantum_component: rag-pipeline\n      omni_quantum_tier: high\n      omni_quantum_system: '44'\n      omni_quantum_stack: knowledge\n    healthcheck:\n      test: ['CMD', 'curl', '-f', 'http://localhost:8000/health']\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - omni-quantum-network\n\n  # System 67 — Document Processing\n  omni-doc-processor:\n    image: omni-quantum/doc-processor:latest\n    container_name: omni-doc-processor\n    restart: unless-stopped\n    environment:\n      MINIO_ENDPOINT: omni-minio:9000\n      MINIO_ACCESS_KEY: ${MINIO_ACCESS_KEY}\n      MINIO_SECRET_KEY: ${MINIO_SECRET_KEY}\n      QDRANT_URL: http://omni-qdrant:6333\n      EMBEDDING_API_URL: http://omni-embedding:8080/embed\n    volumes:\n      - doc-processing-tmp:/tmp/processing\n    ports:\n      - '8089:8000'\n    labels:\n      omni_quantum_component: doc-processor\n      omni_quantum_tier: standard\n      omni_quantum_system: '67'\n      omni_quantum_stack: knowledge\n    networks:\n      - omni-quantum-network\n\nvolumes:\n  embedding-models:\n  knowledge-data:\n  knowledge-queue:\n  doc-processing-tmp:\n\nnetworks:\n  omni-quantum-network:\n    external: true\n"
}
